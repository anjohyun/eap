<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì •ì‹ ê±´ê°• ì¢…í•© ë¬¸ì§„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 414px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            padding: 60px 24px 40px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.05); opacity: 0.1; }
        }

        .header h1 {
            font-size: 28px;
            font-weight: 300;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }

        .header .subtitle {
            font-size: 16px;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        /* ì‹œì‘ í™”ë©´ ìŠ¤íƒ€ì¼ */
        .intro-section {
            padding: 32px 24px;
            text-align: center;
        }

        .intro-title {
            font-size: 24px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 16px;
        }

        .intro-description {
            font-size: 16px;
            color: #6b7280;
            margin-bottom: 32px;
            line-height: 1.5;
        }

        .test-info {
            background: #f8f9fa;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 32px;
            text-align: left;
        }

        .test-item {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
            padding: 16px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .test-item:last-child {
            margin-bottom: 0;
        }

        .test-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            margin-right: 16px;
        }

        .test-icon.phq9 { background: #10b981; }
        .test-icon.gad7 { background: #f59e0b; }
        .test-icon.koss { background: #8b5cf6; }

        .test-content h3 {
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 4px;
        }

        .test-content p {
            font-size: 14px;
            color: #6b7280;
        }

        /* ë¬¸ì§„ í™”ë©´ ìŠ¤íƒ€ì¼ */
        .assessment-section {
            display: none;
            padding: 24px;
        }

        .progress-bar {
            background: #e5e7eb;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 24px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .question-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            margin-bottom: 24px;
        }

        .question-header {
            margin-bottom: 24px;
        }

        .test-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            color: white;
            margin-bottom: 12px;
        }

        .question-number {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 8px;
        }

        .question-text {
            font-size: 18px;
            font-weight: 500;
            color: #1f2937;
            line-height: 1.4;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
        }

        .option:hover {
            background: #e3f2fd;
            border-color: #bbdefb;
        }

        .option.selected {
            background: #e3f2fd;
            border-color: #2196f3;
        }

        .option-radio {
            width: 20px;
            height: 20px;
            border: 2px solid #d1d5db;
            border-radius: 50%;
            margin-right: 12px;
            position: relative;
            transition: all 0.2s;
        }

        .option.selected .option-radio {
            border-color: #2196f3;
        }

        .option.selected .option-radio::after {
            content: '';
            width: 10px;
            height: 10px;
            background: #2196f3;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .option-text {
            flex: 1;
            font-size: 16px;
            color: #374151;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 24px;
        }

        .btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            min-width: 120px;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #6b7280;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        /* ê²°ê³¼ í™”ë©´ ìŠ¤íƒ€ì¼ */
        .results-section {
            display: none;
        }

        .status-overview {
            display: flex;
            justify-content: space-around;
            padding: 24px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .status-card {
            text-align: center;
            flex: 1;
            padding: 16px 8px;
            background: white;
            border-radius: 16px;
            margin: 0 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }

        .status-card:hover {
            transform: translateY(-2px);
        }

        .status-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            margin: 0 auto 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
        }

        .status-normal { background: #10b981; }
        .status-mild { background: #f5bb0b; }
        .status-moderate { background: #ef8844; }
        .status-severe { background: #dc2626; }

        .status-label {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 4px;
        }

        .status-value {
            font-size: 18px;
            font-weight: 600;
            color: #1f2937;
        }

        .content {
            padding: 24px;
        }

        .section {
            margin-bottom: 32px;
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #1f2937;
            display: flex;
            align-items: center;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 24px;
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            border-radius: 2px;
            margin-right: 12px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            font-size: 16px;
            color: #374151;
            flex: 1;
        }

        .result-score {
            font-size: 18px;
            font-weight: 600;
            color: #1f2937;
            margin-right: 12px;
        }

        .result-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            color: white;
        }

        .stress-factors {
            margin-top: 24px;
        }

        .stress-factors-title {
            font-size: 18px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 16px;
        }

        .stress-factor-item {
            display: flex;
            align-items: flex-start;
            padding: 16px;
            background: #fef3c7;
            border-radius: 12px;
            margin-bottom: 12px;
            border-left: 4px solid #f59e0b;
        }

        .stress-factor-rank {
            width: 32px;
            height: 32px;
            background: #f1c00d;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-right: 16px;
            font-size: 14px;
            flex-shrink: 0;
        }

        .stress-factor-content {
            flex: 1;
        }

        .stress-factor-title {
            font-size: 16px;
            font-weight: 600;
            color: #92400e;
            margin-bottom: 4px;
        }

        .stress-factor-desc {
            font-size: 14px;
            color: #a16207;
            line-height: 1.4;
        }

        .recommendation {
            background: linear-gradient(135deg, #e0f2fe 0%, #b3e5fc 100%);
            border-radius: 16px;
            padding: 24px;
            margin-top: 24px;
        }

        .recommendation h3 {
            color: #0277bd;
            margin-bottom: 16px;
            font-size: 18px;
        }

        .recommendation-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .recommendation-item::before {
            content: 'âœ“';
            color: #0277bd;
            font-weight: bold;
            margin-right: 12px;
            margin-top: 2px;
        }

        .recommendation-item:last-child {
            margin-bottom: 0;
        }

        .scoring-table {
            background: #f8f9fa;
            border-radius: 12px;
            overflow: hidden;
            margin-top: 16px;
        }

        .table-header {
            background: #4facfe;
            color: white;
            padding: 12px;
            font-weight: 600;
            text-align: center;
        }

        .table-row {
            display: flex;
            padding: 12px;
            border-bottom: 1px solid #e9ecef;
        }

        .table-row:last-child {
            border-bottom: none;
        }

        .table-cell {
            flex: 1;
            font-size: 14px;
            padding: 0 8px;
            text-align: center;
        }

        .table-cell:first-child {
            font-weight: 600;
            text-align: left;
        }

        .alert {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 16px;
            border-radius: 12px;
            margin: 16px 0;
        }

        .alert-title {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .warning-box {
            background: #fef3c7;
            border: 1px solid #fbbf24;
            color: #92400e;
            padding: 16px;
            border-radius: 12px;
            margin: 16px 0;
        }

        .warning-box .alert-title {
            color: #92400e;
        }

        .success-box {
            background: #d1fae5;
            border: 1px solid #10b981;
            color: #047857;
            padding: 16px;
            border-radius: 12px;
            margin: 16px 0;
        }

        .success-box .alert-title {
            color: #047857;
        }

        .timestamp {
            text-align: center;
            color: #6b7280;
            font-size: 14px;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid #e5e7eb;
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ì‹œì‘ í™”ë©´ -->
        <div id="intro-screen">
            <div class="header">
                <h1>ì •ì‹ ê±´ê°• ì¢…í•© ë¬¸ì§„</h1>
                <p class="subtitle">ë‚˜ì˜ ë§ˆìŒ ìƒíƒœë¥¼ í™•ì¸í•´ë³´ì„¸ìš”</p>
            </div>

            <div class="intro-section">
                <h2 class="intro-title">ì •ì‹ ê±´ê°• ìƒíƒœ ì¢…í•© ê²€ì‚¬</h2>
                <p class="intro-description">
                    ìš°ìš¸, ë¶ˆì•ˆ, ì§ë¬´ìŠ¤íŠ¸ë ˆìŠ¤ ìˆ˜ì¤€ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ì—¬<br>
                    ë§ì¶¤í˜• ê´€ë¦¬ ë°©ì•ˆì„ ì œì‹œí•©ë‹ˆë‹¤.
                </p>

                <div class="test-info">
                    <div class="test-item">
                        <div class="test-icon phq9">ğŸ§ </div>
                        <div class="test-content">
                            <h3>PHQ-9 ìš°ìš¸ì¦ ì„ ë³„ê²€ì‚¬</h3>
                            <p>9ê°œ ë¬¸í•­ Â· ì•½ 2ë¶„ ì†Œìš”</p>
                        </div>
                    </div>
                    <div class="test-item">
                        <div class="test-icon gad7">ğŸ’­</div>
                        <div class="test-content">
                            <h3>GAD-7 ë¶ˆì•ˆì¥ì•  ì„ ë³„ê²€ì‚¬</h3>
                            <p>7ê°œ ë¬¸í•­ Â· ì•½ 2ë¶„ ì†Œìš”</p>
                        </div>
                    </div>
                    <div class="test-item">
                        <div class="test-icon koss">ğŸ’¼</div>
                        <div class="test-content">
                            <h3>KOSS ì§ë¬´ìŠ¤íŠ¸ë ˆìŠ¤ ì¸¡ì •</h3>
                            <p>26ê°œ ë¬¸í•­ Â· ì•½ 5ë¶„ ì†Œìš”</p>
                        </div>
                    </div>
                </div>

                <button class="btn" onclick="startAssessment()">ê²€ì‚¬ ì‹œì‘í•˜ê¸°</button>
            </div>
        </div>

        <!-- ë¬¸ì§„ í™”ë©´ -->
        <div id="assessment-screen" class="assessment-section">
            <div class="header">
                <h1 id="current-test-title">PHQ-9 ìš°ìš¸ì¦ ì„ ë³„ê²€ì‚¬</h1>
                <p class="subtitle" id="current-test-subtitle">ì§€ë‚œ 2ì£¼ ë™ì•ˆì˜ ê²½í—˜ì„ ë– ì˜¬ë ¤ ì£¼ì„¸ìš”</p>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>

            <div class="question-card">
                <div class="question-header">
                    <span class="test-badge" id="test-badge">PHQ-9</span>
                    <div class="question-number" id="question-number">ì§ˆë¬¸ 1 / 9</div>
                    <div class="question-text" id="question-text"></div>
                </div>

                <div class="options" id="options-container"></div>
            </div>

            <div class="navigation">
                <button class="btn btn-secondary" id="prev-btn" onclick="previousQuestion()" disabled>ì´ì „</button>
                <button class="btn" id="next-btn" onclick="nextQuestion()" disabled>ë‹¤ìŒ</button>
            </div>
        </div>

        <!-- ê²°ê³¼ í™”ë©´ -->
        <div id="results-screen" class="results-section">
            <div class="header">
                <h1>ì¢…í•© ë¬¸ì§„ ê²°ê³¼</h1>
                <p class="subtitle">ì •ì‹ ê±´ê°• ìƒíƒœ ì¢…í•© ë¶„ì„</p>
            </div>

            <div class="status-overview">
                <div class="status-card">
                    <div class="status-icon" id="phq9-icon">0</div>
                    <div class="status-label">PHQ-9</div>
                    <div class="status-value" id="phq9-status">-</div>
                </div>
                <div class="status-card">
                    <div class="status-icon" id="gad7-icon">0</div>
                    <div class="status-label">GAD-7</div>
                    <div class="status-value" id="gad7-status">-</div>
                </div>
                <div class="status-card">
                    <div class="status-icon" id="koss-icon">0</div>
                    <div class="status-label">KOSS</div>
                    <div class="status-value" id="koss-status">-</div>
                </div>
            </div>

            <div class="content">
                <div class="section">
                    <div class="section-title">ìƒì„¸ ê²€ì‚¬ ê²°ê³¼</div>
                    
                    <div class="result-item">
                        <div class="result-label">PHQ-9 (ìš°ìš¸ì¦ ì„ ë³„ê²€ì‚¬)</div>
                        <div class="result-score" id="phq9-score">0ì </div>
                        <div class="result-status" id="phq9-result-status">ì •ìƒ</div>
                    </div>
                    
                    <div class="result-item">
                        <div class="result-label">GAD-7 (ë¶ˆì•ˆì¥ì•  ì„ ë³„ê²€ì‚¬)</div>
                        <div class="result-score" id="gad7-score">0ì </div>
                        <div class="result-status" id="gad7-result-status">ì •ìƒ</div>
                    </div>
                    
                    <div class="result-item">
                        <div class="result-label">KOSS (ì§ë¬´ìŠ¤íŠ¸ë ˆìŠ¤ ì¸¡ì •)</div>
                        <div class="result-score" id="koss-score">0ì </div>
                        <div class="result-status" id="koss-result-status">ì •ìƒ</div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">ì „ë¬¸ê°€ ìƒì„¸ ë¶„ì„</div>
                    
                    <div id="analysis-content">
                        <!-- ë¶„ì„ ë‚´ìš©ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                    </div>

                    <div class="stress-factors" id="stress-factors-section">
                        <!-- ìŠ¤íŠ¸ë ˆìŠ¤ ìš”ì¸ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">ë§ì¶¤í˜• ê´€ë¦¬ ë°©ì•ˆ</div>
                    
                    <div class="recommendation">
                        <h3>ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ ê´€ë¦¬ë²•</h3>
                        <div id="immediate-recommendations">
                            <!-- ì¶”ì²œì‚¬í•­ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </div>
                    </div>

                    <div class="recommendation">
                        <h3>ì „ë¬¸ì  ë„ì›€</h3>
                        <div id="professional-recommendations">
                            <!-- ì¶”ì²œì‚¬í•­ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">ì ìˆ˜ ì‚°ì¶œ ë°©ì‹</div>
                    
                    <div class="scoring-table">
                        <div class="table-header">PHQ-9 ì±„ì  ê¸°ì¤€</div>
                        <div class="table-row">
                            <div class="table-cell">0-4ì </div>
                            <div class="table-cell">ìš°ìš¸ì¦ ì•„ë‹˜</div>
                        </div>
                        <div class="table-row">
                            <div class="table-cell">5-9ì </div>
                            <div class="table-cell">ê°€ë²¼ìš´ ìš°ìš¸ì¦</div>
                        </div>
                        <div class="table-row">
                            <div class="table-cell">10-19ì </div>
                            <div class="table-cell">ì¤‘ê°„ì •ë„ ìš°ìš¸ì¦</div>
                        </div>
                        <div class="table-row">
                            <div class="table-cell">20-27ì </div>
                            <div class="table-cell">ì‹¬í•œ ìš°ìš¸ì¦</div>
                        </div>
                    </div>

                    <div class="scoring-table">
                        <div class="table-header">GAD-7 ì±„ì  ê¸°ì¤€</div>
                        <div class="table-row">
                            <div class="table-cell">0-4ì </div>
                            <div class="table-cell">ë¶ˆì•ˆ ì•„ë‹˜</div>
                        </div>
                        <div class="table-row">
                            <div class="table-cell">5-9ì </div>
                            <div class="table-cell">ê°€ë²¼ìš´ ë¶ˆì•ˆ</div>
                        </div>
                        <div class="table-row">
                            <div class="table-cell">10-14ì </div>
                            <div class="table-cell">ì¤‘ê°„ ë¶ˆì•ˆ</div>
                        </div>
                        <div class="table-row">
                            <div class="table-cell">15-21ì </div>
                            <div class="table-cell">ì‹¬í•œ ë¶ˆì•ˆ</div>
                        </div>
                    </div>

                    <div class="scoring-table">
                        <div class="table-header">KOSS ì±„ì  ê¸°ì¤€</div>
                        <div class="table-row">
                            <div class="table-cell">42.4ì  ì´í•˜</div>
                            <div class="table-cell">ì •ìƒ (í•˜ìœ„ 25%)</div>
                        </div>
                        <div class="table-row">
                            <div class="table-cell">42.5-48.4ì </div>
                            <div class="table-cell">ê²½ê³„ (ì¤‘ìœ„ 50%)</div>
                        </div>
                        <div class="table-row">
                            <div class="table-cell">48.5-54.7ì </div>
                            <div class="table-cell">ìœ„í—˜ (ìƒìœ„ 25%)</div>
                        </div>
                        <div class="table-row">
                            <div class="table-cell">54.8ì  ì´ìƒ</div>
                            <div class="table-cell">ê³ ìœ„í—˜</div>
                        </div>
                    </div>
                </div>

                <button class="btn" onclick="restartAssessment()">ë‹¤ì‹œ ê²€ì‚¬í•˜ê¸°</button>
                
                <div class="timestamp" id="timestamp">
                    <!-- íƒ€ì„ìŠ¤íƒ¬í”„ê°€ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // ê²€ì‚¬ ë°ì´í„°
        const assessmentData = {
            phq9: {
                title: "PHQ-9 ìš°ìš¸ì¦ ì„ ë³„ê²€ì‚¬",
                subtitle: "ì§€ë‚œ 2ì£¼ ë™ì•ˆì˜ ê²½í—˜ì„ ë– ì˜¬ë ¤ ì£¼ì„¸ìš”",
                badge: "PHQ-9",
                questions: [
                    "ì¼ì´ë‚˜ ë‹¤ë¥¸ í™œë™ì„ í•˜ëŠ”ë° í¥ë¯¸ë‚˜ ì¦ê±°ì›€ì„ ê±°ì˜ ëŠë¼ì§€ ëª»í•¨",
                    "ê¸°ë¶„ì´ ê°€ë¼ì•‰ê±°ë‚˜, ìš°ìš¸í•˜ê±°ë‚˜, í¬ë§ì´ ì—†ë‹¤ê³  ëŠë‚Œ",
                    "ì ë“¤ê¸° ì–´ë µê±°ë‚˜ ê³„ì† ì ì„ ìê¸° ì–´ë ¤ì›€, ë˜ëŠ” ë„ˆë¬´ ë§ì´ ì ",
                    "í”¼ê³¤í•˜ë‹¤ê³  ëŠë¼ê±°ë‚˜ ê¸°ë ¥ì´ ê±°ì˜ ì—†ìŒ",
                    "ì…ë§›ì´ ì—†ê±°ë‚˜ ê³¼ì‹ì„ í•¨",
                    "ìì‹ ì„ ë¶€ì •ì ìœ¼ë¡œ ë´„ - í˜¹ì€ ìì‹ ì´ ì‹¤íŒ¨ìë¼ê³  ëŠë¼ê±°ë‚˜ ìì‹  ë˜ëŠ” ê°€ì¡±ì„ ì‹¤ë§ì‹œì¼°ë‹¤ê³  ëŠë‚Œ",
                    "ì‹ ë¬¸ì„ ì½ê±°ë‚˜ í…”ë ˆë¹„ì „ ë³´ëŠ” ê²ƒê³¼ ê°™ì€ ì¼ì— ì§‘ì¤‘í•˜ëŠ” ê²ƒì´ ì–´ë ¤ì›€",
                    "ë‹¤ë¥¸ ì‚¬ëŒë“¤ì´ ì£¼ëª©í•  ì •ë„ë¡œ í‰ì†Œë³´ë‹¤ ë§ì´ë‚˜ í–‰ë™ì´ ëŠë ¤ì§, ë˜ëŠ” ë°˜ëŒ€ë¡œ ì•ˆì ˆë¶€ì ˆ ëª»í•˜ê±°ë‚˜ ë“¤ë– ì„œ í‰ì†Œë³´ë‹¤ ë§ì´ ì›€ì§ì„",
                    "ì°¨ë¼ë¦¬ ì£½ëŠ” ê²ƒì´ ë” ë‚«ê² ë‹¤ê³  ìƒê°í•˜ê±°ë‚˜ ì–´ë–¤ ì‹ìœ¼ë¡œë“  ìì‹ ì„ í•´ì¹  ê²ƒì´ë¼ê³  ìƒê°í•¨"
                ],
                options: [
                    "ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤",
                    "ë©°ì¹  ë™ì•ˆ ê·¸ë¬ë‹¤",
                    "7ì¼ ì´ìƒ ê·¸ë¬ë‹¤",
                    "ê±°ì˜ ë§¤ì¼ ê·¸ë¬ë‹¤"
                ]
            },
            gad7: {
                title: "GAD-7 ë¶ˆì•ˆì¥ì•  ì„ ë³„ê²€ì‚¬",
                subtitle: "ì§€ë‚œ 2ì£¼ ë™ì•ˆì˜ ê²½í—˜ì„ ë– ì˜¬ë ¤ ì£¼ì„¸ìš”",
                badge: "GAD-7",
                questions: [
                    "ì´ˆì¡°í•˜ê±°ë‚˜ ë¶ˆì•ˆí•˜ê±°ë‚˜ ì¡°ë§ˆì¡°ë§ˆí•˜ê²Œ ëŠë‚Œ",
                    "ê±±ì •í•˜ëŠ” ê²ƒì„ ë©ˆì¶”ê±°ë‚˜ ì¡°ì ˆí•  ìˆ˜ ì—†ìŒ",
                    "ì—¬ëŸ¬ ê°€ì§€ ê²ƒë“¤ì— ëŒ€í•´ ê±±ì •ì„ ë„ˆë¬´ ë§ì´ í•¨",
                    "í¸í•˜ê²Œ ìˆê¸°ê°€ ì–´ë ¤ì›€",
                    "ë„ˆë¬´ ì•ˆì ˆë¶€ì ˆëª»í•´ì„œ ê°€ë§Œíˆ ìˆê¸°ê°€ í˜ë“¦",
                    "ì‰½ê²Œ ì§œì¦ì´ ë‚˜ê±°ë‚˜ ì„±ì„ ë‚´ê²Œ ë¨",
                    "ë§ˆì¹˜ ë”ì°í•œ ì¼ì´ ì¼ì–´ë‚  ê²ƒì²˜ëŸ¼ ë‘ë ¤ì›Œí•¨"
                ],
                options: [
                    "ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤",
                    "ë©°ì¹  ë™ì•ˆ ê·¸ë¬ë‹¤",
                    "7ì¼ ì´ìƒ ê·¸ë¬ë‹¤",
                    "ê±°ì˜ ë§¤ì¼ ê·¸ë¬ë‹¤"
                ]
            },
            koss: {
                title: "KOSS ì§ë¬´ìŠ¤íŠ¸ë ˆìŠ¤ ì¸¡ì •",
                subtitle: "í˜„ì¬ ì§ì¥ ìƒí™©ì— ëŒ€í•´ ë‹µë³€í•´ ì£¼ì„¸ìš”",
                badge: "KOSS",
                questions: [
                    "ë¬¼ë¦¬ì  í™˜ê²½ì´ ë¶ˆì¾Œí•˜ë‹¤(ì†ŒìŒ, ì§„ë™, ì¡°ëª…, ì˜¨ë„, í™˜ê¸° ë“±)",
                    "ì‘ì—…ê³µê°„ì´ ë¹„ì¢ê³  ë¶ˆí¸í•˜ë‹¤",
                    "ì‘ì—…í™˜ê²½ì´ ì•ˆì „í•˜ì§€ ì•Šë‹¤",
                    "ì¼ì´ ë§¤ìš° ë¹¨ë¦¬ ì²˜ë¦¬ë˜ì–´ì•¼ í•œë‹¤",
                    "ì¼ì˜ ì–‘ì´ ë„ˆë¬´ ë§ë‹¤",
                    "ì‹œê°„ë‚´ì— ì—…ë¬´ë¥¼ ëë‚´ê¸°ê°€ ì–´ë µë‹¤",
                    "ì—…ë¬´ìˆ˜í–‰ ì¤‘ì— ê³ ë„ì˜ ì§‘ì¤‘ì´ ìš”êµ¬ëœë‹¤",
                    "í•˜ê³  ìˆëŠ” ì¼ì˜ ë°©ì‹ì„ ê²°ì •í•  ìˆ˜ ìˆë‹¤",
                    "ì—…ë¬´ìˆ˜í–‰ ê³¼ì •ì—ì„œ ë‚˜ì˜ ê°œì¸ì  ì˜ê²¬ì´ ë°˜ì˜ëœë‹¤",
                    "ì—…ë¬´ëŸ‰ê³¼ ì‘ì—…ìŠ¤ì¼€ì¤„ì„ ìŠ¤ìŠ¤ë¡œ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤",
                    "ì§ì¥ë™ë£Œë“¤ê³¼ì˜ ì˜ì‚¬ì†Œí†µì´ ì›í™œí•˜ì§€ ì•Šë‹¤",
                    "ì§ì¥ë™ë£Œë“¤ ê°„ì˜ ê°ˆë“±ì´ ìˆë‹¤",
                    "ì§ì¥ë™ë£Œë“¤ì´ ë„ì›€ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤",
                    "ê³ ìš©ì´ ë¶ˆì•ˆì •í•˜ë‹¤",
                    "ì•ìœ¼ë¡œ 2ë…„ ë™ì•ˆ ì§€ê¸ˆ ì§ì¥ì—ì„œ ì¼í•  ìˆ˜ ìˆì„ì§€ í™•ì‹ í•˜ê¸° ì–´ë µë‹¤",
                    "íšŒì‚¬ì˜ ì •ì±…ê²°ì •ì— ì˜í–¥ë ¥ì´ ì—†ë‹¤",
                    "íšŒì‚¬ì˜ ì •ì±…ì´ë‚˜ ì „ëµì— ëŒ€í•œ ì •ë³´ê°€ ë¶€ì¡±í•˜ë‹¤",
                    "ë‚´ ì—…ë¬´ê°€ íšŒì‚¬ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì— ëŒ€í•œ ì •ë³´ê°€ ë¶€ì¡±í•˜ë‹¤",
                    "íšŒì‚¬ì—ì„œ ë‚˜ì—ê²Œ ê¸°ëŒ€í•˜ëŠ” ê²ƒì´ ë¬´ì—‡ì¸ì§€ ì•Œê¸° ì–´ë µë‹¤",
                    "ì—…ë¬´ë¶„ì•¼ì—ì„œ ê°œì¸ì˜ ë°œì „ê°€ëŠ¥ì„±ì´ ì—†ë‹¤",
                    "ë‚˜ì˜ êµìœ¡ì´ë‚˜ ê¸°ìˆ  ìˆ˜ì¤€ì— ë¹„í•´ ë‚´ê°€ í•˜ê³  ìˆëŠ” ì¼ì´ ê°€ì¹˜ê°€ ë‚®ë‹¤",
                    "ë‚˜ì˜ ì§ì—…ì€ ë‚´ê°€ ê°€ì§„ ëŠ¥ë ¥ì— ë¹„í•´ ë³´ìˆ˜ê°€ ì ë‹¤",
                    "ì§ì¥ì—ì„œ ë‚¨ë…€ì°¨ë³„ì´ ìˆë‹¤",
                    "ë¹„í•©ë¦¬ì ì´ê³  ì´í•´ë˜ì§€ ì•ŠëŠ” ì—…ë¬´ì§€ì‹œë¥¼ ë°›ëŠ”ë‹¤",
                    "ì—…ë¬´ëŸ‰ì— ë¹„í•´ ì¸ë ¥ì´ ë¶€ì¡±í•˜ë‹¤",
                    "ì—…ë¬´ ìˆ˜í–‰ì— í•„ìš”í•œ ì¥ë¹„ë‚˜ ì‹œì„¤ì´ ë¶€ì¡±í•˜ë‹¤"
                ],
                options: [
                    "ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤",
                    "ê·¸ë ‡ì§€ ì•Šë‹¤",
                    "ê·¸ë ‡ë‹¤",
                    "ë§¤ìš° ê·¸ë ‡ë‹¤"
                ]
            }
        };

        // KOSS ì˜ì—­ë³„ ë¬¸í•­ ë§¤í•‘
        const kossDomains = {
            physical: { 
                name: "ë¬¼ë¦¬í™˜ê²½", 
                items: [0, 1, 2], 
                description: "ì‘ì—…ì¥ì˜ ë¬¼ë¦¬ì  í™˜ê²½(ì†ŒìŒ, ì¡°ëª…, ì˜¨ë„, ê³µê°„ ë“±)ìœ¼ë¡œ ì¸í•œ ìŠ¤íŠ¸ë ˆìŠ¤"
            },
            jobDemand: { 
                name: "ì§ë¬´ìš”êµ¬ë„", 
                items: [3, 4, 5, 6], 
                description: "ê³¼ë„í•œ ì—…ë¬´ëŸ‰, ì‹œê°„ì  ì••ë°•, ë©€í‹°íƒœìŠ¤í‚¹ ìš”êµ¬ë¡œ ì¸í•œ ìŠ¤íŠ¸ë ˆìŠ¤"
            },
            autonomy: { 
                name: "ì§ë¬´ììœ¨ì„±", 
                items: [7, 8, 9], 
                description: "ì—…ë¬´ ìˆ˜í–‰ ë°©ì‹ì´ë‚˜ ìŠ¤ì¼€ì¤„ ì¡°ì •ì˜ ììœ¨ì„± ë¶€ì¡±ìœ¼ë¡œ ì¸í•œ ìŠ¤íŠ¸ë ˆìŠ¤",
                reverse: true  // ì—­ì±„ì  ë¬¸í•­
            },
            relationship: { 
                name: "ê´€ê³„ê°ˆë“±", 
                items: [10, 11, 12], 
                description: "ì§ì¥ ë™ë£Œë“¤ê³¼ì˜ ê´€ê³„ì—ì„œ ë°œìƒí•˜ëŠ” ê°ˆë“±ì´ë‚˜ ì†Œí†µ ë¬¸ì œ"
            },
            jobSecurity: { 
                name: "ì§ë¬´ë¶ˆì•ˆì •", 
                items: [13, 14], 
                description: "ê³ ìš© ë¶ˆì•ˆì •ì„±ì´ë‚˜ ë¯¸ë˜ì— ëŒ€í•œ ë¶ˆí™•ì‹¤ì„±ìœ¼ë¡œ ì¸í•œ ìŠ¤íŠ¸ë ˆìŠ¤"
            },
            organization: { 
                name: "ì¡°ì§ì²´ê³„", 
                items: [15, 16, 17, 18, 19], 
                description: "ì¸ì‚¬ì œë„ì˜ ê³µì •ì„±, ë¶€ì„œ ê°„ í˜‘ë ¥, ì˜ê²¬ ë°˜ì˜ ê¸°íšŒ ë¶€ì¡±"
            },
            reward: { 
                name: "ë³´ìƒë¶€ì ì ˆ", 
                items: [20, 21], 
                description: "ì—…ë¬´ì— ë¹„í•´ ë¶€ì ì ˆí•œ ë³´ìƒì´ë‚˜ ì¸ì • ë¶€ì¡±ìœ¼ë¡œ ì¸í•œ ìŠ¤íŠ¸ë ˆìŠ¤"
            },
            culture: { 
                name: "ì§ì¥ë¬¸í™”", 
                items: [22, 23, 24, 25], 
                description: "ì°¨ë³„, ë¹„í•©ë¦¬ì  ì—…ë¬´ì§€ì‹œ, ë¶€ì¡±í•œ ì¸ë ¥ì´ë‚˜ ì‹œì„¤ë¡œ ì¸í•œ ìŠ¤íŠ¸ë ˆìŠ¤"
            }
        };

        // í˜„ì¬ ìƒíƒœ
        let currentTest = 'phq9';
        let currentQuestion = 0;
        let responses = {
            phq9: [],
            gad7: [],
            koss: []
        };

        // ê²€ì‚¬ ì‹œì‘
        function startAssessment() {
            document.getElementById('intro-screen').style.display = 'none';
            document.getElementById('assessment-screen').style.display = 'block';
            loadQuestion();
        }

        // ì§ˆë¬¸ ë¡œë“œ
        function loadQuestion() {
            const testData = assessmentData[currentTest];
            const totalQuestions = testData.questions.length;
            
            // í—¤ë” ì—…ë°ì´íŠ¸
            document.getElementById('current-test-title').textContent = testData.title;
            document.getElementById('current-test-subtitle').textContent = testData.subtitle;
            document.getElementById('test-badge').textContent = testData.badge;
            
            // í…ŒìŠ¤íŠ¸ ë°°ì§€ ìƒ‰ìƒ ì„¤ì •
            const badge = document.getElementById('test-badge');
            badge.style.background = currentTest === 'phq9' ? '#10b981' : 
                                   currentTest === 'gad7' ? '#f59e0b' : '#8b5cf6';
            
            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            const overallProgress = calculateOverallProgress();
            document.getElementById('progress-fill').style.width = `${overallProgress}%`;
            
            // ì§ˆë¬¸ ë²ˆí˜¸ ë° í…ìŠ¤íŠ¸
            document.getElementById('question-number').textContent = `ì§ˆë¬¸ ${currentQuestion + 1} / ${totalQuestions}`;
            document.getElementById('question-text').textContent = testData.questions[currentQuestion];
            
            // ì„ íƒì§€ ìƒì„±
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            testData.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.onclick = () => selectOption(index);
                
                optionElement.innerHTML = `
                    <div class="option-radio"></div>
                    <div class="option-text">${option}</div>
                `;
                
                optionsContainer.appendChild(optionElement);
            });
            
            // ê¸°ì¡´ ì‘ë‹µ ë³µì›
            if (responses[currentTest][currentQuestion] !== undefined) {
                const selectedIndex = responses[currentTest][currentQuestion];
                document.querySelectorAll('.option')[selectedIndex].classList.add('selected');
            }
            
            // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ìƒíƒœ
            updateNavigationButtons();
        }

        // ì„ íƒì§€ ì„ íƒ
        function selectOption(optionIndex) {
            // ê¸°ì¡´ ì„ íƒ ì œê±°
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            
            // ìƒˆ ì„ íƒ ì¶”ê°€
            document.querySelectorAll('.option')[optionIndex].classList.add('selected');
            
            // ì‘ë‹µ ì €ì¥
            responses[currentTest][currentQuestion] = optionIndex;
            
            // ë‹¤ìŒ ë²„íŠ¼ í™œì„±í™”
            document.getElementById('next-btn').disabled = false;
        }

        // ì „ì²´ ì§„í–‰ë¥  ê³„ì‚°
        function calculateOverallProgress() {
            const totalQuestions = 9 + 7 + 26; // PHQ-9 + GAD-7 + KOSS
            let completedQuestions = 0;
            
            if (currentTest === 'phq9') {
                completedQuestions = currentQuestion;
            } else if (currentTest === 'gad7') {
                completedQuestions = 9 + currentQuestion;
            } else if (currentTest === 'koss') {
                completedQuestions = 16 + currentQuestion;
            }
            
            return Math.round((completedQuestions / totalQuestions) * 100);
        }

        // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            // ì´ì „ ë²„íŠ¼
            if (currentTest === 'phq9' && currentQuestion === 0) {
                prevBtn.disabled = true;
            } else {
                prevBtn.disabled = false;
            }
            
            // ë‹¤ìŒ ë²„íŠ¼
            const hasResponse = responses[currentTest][currentQuestion] !== undefined;
            nextBtn.disabled = !hasResponse;
            
            // ë§ˆì§€ë§‰ ì§ˆë¬¸ì¸ì§€ í™•ì¸
            const testData = assessmentData[currentTest];
            const isLastQuestion = currentQuestion === testData.questions.length - 1;
            const isLastTest = currentTest === 'koss';
            
            if (isLastQuestion && isLastTest) {
                nextBtn.textContent = 'ê²°ê³¼ ë³´ê¸°';
            } else {
                nextBtn.textContent = 'ë‹¤ìŒ';
            }
        }

        // ë‹¤ìŒ ì§ˆë¬¸
        function nextQuestion() {
            const testData = assessmentData[currentTest];
            const isLastQuestion = currentQuestion === testData.questions.length - 1;
            
            if (isLastQuestion) {
                // ë‹¤ìŒ í…ŒìŠ¤íŠ¸ë¡œ ì´ë™
                if (currentTest === 'phq9') {
                    currentTest = 'gad7';
                    currentQuestion = 0;
                    loadQuestion();
                } else if (currentTest === 'gad7') {
                    currentTest = 'koss';
                    currentQuestion = 0;
                    loadQuestion();
                } else {
                    // ëª¨ë“  í…ŒìŠ¤íŠ¸ ì™„ë£Œ - ê²°ê³¼ í™”ë©´ìœ¼ë¡œ
                    showResults();
                }
            } else {
                currentQuestion++;
                loadQuestion();
            }
        }

        // ì´ì „ ì§ˆë¬¸
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
            } else {
                // ì´ì „ í…ŒìŠ¤íŠ¸ë¡œ ì´ë™
                if (currentTest === 'gad7') {
                    currentTest = 'phq9';
                    currentQuestion = assessmentData.phq9.questions.length - 1;
                    loadQuestion();
                } else if (currentTest === 'koss') {
                    currentTest = 'gad7';
                    currentQuestion = assessmentData.gad7.questions.length - 1;
                    loadQuestion();
                }
            }
        }

        // ê²°ê³¼ ê³„ì‚° ë° í‘œì‹œ
        function showResults() {
            // ì ìˆ˜ ê³„ì‚°
            const phq9Score = calculatePHQ9Score();
            const gad7Score = calculateGAD7Score();
            const kossScores = calculateKOSSScore();
            const kossTotal = calculateKOSSTotal(kossScores);
            
            // ê²°ê³¼ í•´ì„
            const phq9Result = interpretPHQ9(phq9Score);
            const gad7Result = interpretGAD7(gad7Score);
            const kossResult = interpretKOSS(kossTotal);
            
            // í™”ë©´ ì „í™˜
            document.getElementById('assessment-screen').style.display = 'none';
            document.getElementById('results-screen').style.display = 'block';
            
            // ìƒíƒœ ì¹´ë“œ ì—…ë°ì´íŠ¸
            updateStatusCards(phq9Score, gad7Score, kossTotal, phq9Result, gad7Result, kossResult);
            
            // ìƒì„¸ ê²°ê³¼ ì—…ë°ì´íŠ¸
            updateDetailedResults(phq9Score, gad7Score, kossTotal, phq9Result, gad7Result, kossResult);
            
            // ë¶„ì„ ë° ê¶Œì¥ì‚¬í•­ ìƒì„±
            generateAnalysisAndRecommendations(phq9Result, gad7Result, kossResult, kossScores);
            
            // íƒ€ì„ìŠ¤íƒ¬í”„ ì„¤ì •
            setTimestamp();
        }

        // PHQ-9 ì ìˆ˜ ê³„ì‚°
        function calculatePHQ9Score() {
            return responses.phq9.reduce((sum, score) => sum + score, 0);
        }

        // GAD-7 ì ìˆ˜ ê³„ì‚°
        function calculateGAD7Score() {
            return responses.gad7.reduce((sum, score) => sum + score, 0);
        }

        // KOSS ì˜ì—­ë³„ ì ìˆ˜ ê³„ì‚°
        function calculateKOSSScore() {
            const domainScores = {};
            
            Object.keys(kossDomains).forEach(domain => {
                const domainInfo = kossDomains[domain];
                const domainItems = domainInfo.items;
                let domainSum = 0;
                
                domainItems.forEach(itemIndex => {
                    let score = responses.koss[itemIndex];
                    // ì—­ì±„ì  ë¬¸í•­ ì²˜ë¦¬ (ì§ë¬´ììœ¨ì„±)
                    if (domainInfo.reverse) {
                        score = 3 - score; // 0->3, 1->2, 2->1, 3->0
                    }
                    domainSum += score;
                });
                
                const domainAvg = domainSum / domainItems.length;
                domainScores[domain] = Math.round((domainAvg * 100 / 3) * 10) / 10;
            });
            
            return domainScores;
        }

        // KOSS ì´ì  ê³„ì‚°
        function calculateKOSSTotal(domainScores) {
            const scores = Object.values(domainScores);
            const total = scores.reduce((sum, score) => sum + score, 0) / scores.length;
            return Math.round(total * 10) / 10;
        }

        // PHQ-9 ê²°ê³¼ í•´ì„
        function interpretPHQ9(score) {
            if (score <= 4) return { level: 'normal', text: 'ìš°ìš¸ì¦ ì•„ë‹˜', className: 'status-normal' };
            if (score <= 9) return { level: 'mild', text: 'ê°€ë²¼ìš´ ìš°ìš¸', className: 'status-mild' };
            if (score <= 19) return { level: 'moderate', text: 'ì¤‘ê°„ ìš°ìš¸', className: 'status-moderate' };
            return { level: 'severe', text: 'ì‹¬í•œ ìš°ìš¸', className: 'status-severe' };
        }

        // GAD-7 ê²°ê³¼ í•´ì„
        function interpretGAD7(score) {
            if (score <= 4) return { level: 'normal', text: 'ë¶ˆì•ˆ ì•„ë‹˜', className: 'status-normal' };
            if (score <= 9) return { level: 'mild', text: 'ê°€ë²¼ìš´ ë¶ˆì•ˆ', className: 'status-mild' };
            if (score <= 14) return { level: 'moderate', text: 'ì¤‘ê°„ ë¶ˆì•ˆ', className: 'status-moderate' };
            return { level: 'severe', text: 'ì‹¬í•œ ë¶ˆì•ˆ', className: 'status-severe' };
        }

        // KOSS ê²°ê³¼ í•´ì„
        function interpretKOSS(score) {
            if (score <= 42.4) return { level: 'normal', text: 'ì •ìƒ', className: 'status-normal' };
            if (score <= 48.4) return { level: 'boundary', text: 'ê²½ê³„ ìˆ˜ì¤€', className: 'status-mild' };
            if (score <= 54.7) return { level: 'risk', text: 'ìœ„í—˜', className: 'status-moderate' };
            return { level: 'high-risk', text: 'ê³ ìœ„í—˜', className: 'status-severe' };
        }

        // ìƒíƒœ ì¹´ë“œ ì—…ë°ì´íŠ¸
        function updateStatusCards(phq9Score, gad7Score, kossScore, phq9Result, gad7Result, kossResult) {
            // PHQ-9
            const phq9Icon = document.getElementById('phq9-icon');
            phq9Icon.textContent = phq9Score;
            phq9Icon.className = `status-icon ${phq9Result.className}`;
            document.getElementById('phq9-status').textContent = phq9Result.text;
            
            // GAD-7
            const gad7Icon = document.getElementById('gad7-icon');
            gad7Icon.textContent = gad7Score;
            gad7Icon.className = `status-icon ${gad7Result.className}`;
            document.getElementById('gad7-status').textContent = gad7Result.text;
            
            // KOSS
            const kossIcon = document.getElementById('koss-icon');
            kossIcon.textContent = kossScore;
            kossIcon.className = `status-icon ${kossResult.className}`;
            document.getElementById('koss-status').textContent = kossResult.text;
        }

        // ìƒì„¸ ê²°ê³¼ ì—…ë°ì´íŠ¸
        function updateDetailedResults(phq9Score, gad7Score, kossScore, phq9Result, gad7Result, kossResult) {
            document.getElementById('phq9-score').textContent = `${phq9Score}ì `;
            document.getElementById('phq9-result-status').textContent = phq9Result.text;
            document.getElementById('phq9-result-status').className = `result-status ${phq9Result.className}`;
            
            document.getElementById('gad7-score').textContent = `${gad7Score}ì `;
            document.getElementById('gad7-result-status').textContent = gad7Result.text;
            document.getElementById('gad7-result-status').className = `result-status ${gad7Result.className}`;
            
            document.getElementById('koss-score').textContent = `${kossScore}ì `;
            document.getElementById('koss-result-status').textContent = kossResult.text;
            document.getElementById('koss-result-status').className = `result-status ${kossResult.className}`;
        }

        // ë¶„ì„ ë° ê¶Œì¥ì‚¬í•­ ìƒì„±
        function generateAnalysisAndRecommendations(phq9Result, gad7Result, kossResult, kossScores) {
            const analysisContent = document.getElementById('analysis-content');
            const immediateRecs = document.getElementById('immediate-recommendations');
            const professionalRecs = document.getElementById('professional-recommendations');
            const stressFactorsSection = document.getElementById('stress-factors-section');
            
            // ì „ì²´ ìœ„í—˜ë„ í‰ê°€
            const riskLevels = [phq9Result.level, gad7Result.level, kossResult.level];
            const hasModerateOrSevere = riskLevels.includes('moderate') || riskLevels.includes('severe') || riskLevels.includes('high-risk') || riskLevels.includes('risk');
            const hasMild = riskLevels.includes('mild') || riskLevels.includes('boundary');
            
            // ë¶„ì„ ë‚´ìš© ìƒì„±
            let analysisHTML = '';
            
            if (hasModerateOrSevere) {
                analysisHTML = `
                    <div class="alert">
                        <div class="alert-title">ì£¼ì˜ í•„ìš”</div>
                        í˜„ì¬ ${gad7Result.text} ìƒíƒœì™€ ${phq9Result.text} ì¦ìƒì´ ê´€ì°°ë˜ë©°, ì§ë¬´ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ${kossResult.text}ì— ìˆìŠµë‹ˆë‹¤. ì¡°ê¸° ê°œì…ì„ í†µí•´ ì¦ìƒ ì•…í™”ë¥¼ ë°©ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
                    </div>
                `;
            } else if (hasMild) {
                analysisHTML = `
                    <div class="warning-box">
                        <div class="alert-title">ê²½ë¯¸í•œ ì£¼ì˜ í•„ìš”</div>
                        í˜„ì¬ ì¼ë¶€ ì˜ì—­ì—ì„œ ê²½ë¯¸í•œ ìŠ¤íŠ¸ë ˆìŠ¤ë‚˜ ìš°ìš¸/ë¶ˆì•ˆ ì¦ìƒì´ ê´€ì°°ë©ë‹ˆë‹¤. ì ì ˆí•œ ìê¸°ê´€ë¦¬ë¥¼ í†µí•´ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </div>
                `;
            } else {
                analysisHTML = `
                    <div class="success-box">
                        <div class="alert-title">ì–‘í˜¸í•œ ìƒíƒœ</div>
                        í˜„ì¬ ì •ì‹ ê±´ê°• ìƒíƒœê°€ ì „ë°˜ì ìœ¼ë¡œ ì–‘í˜¸í•©ë‹ˆë‹¤. í˜„ì¬ì˜ ê±´ê°•í•œ ìƒí™œ íŒ¨í„´ì„ ìœ ì§€í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
                    </div>
                `;
            }
            
            analysisContent.innerHTML = analysisHTML;
            
            // ìŠ¤íŠ¸ë ˆìŠ¤ ìš”ì¸ ìƒìœ„ 3ê°œ ì˜ì—­ ìƒì„±
            generateStressFactors(kossScores, stressFactorsSection);
            
            // ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ ê´€ë¦¬ë²•
            let immediateRecsHTML = '';
            if (hasModerateOrSevere) {
                immediateRecsHTML = `
                    <div class="recommendation-item">ê·œì¹™ì ì¸ ìˆ˜ë©´ íŒ¨í„´ ìœ ì§€ (7-8ì‹œê°„)</div>
                    <div class="recommendation-item">ì ì‹¬ì‹œê°„ 10ë¶„ ì‚°ì±… ë˜ëŠ” ëª…ìƒ</div>
                    <div class="recommendation-item">ì—…ë¬´ ì¤‘ 1ì‹œê°„ë§ˆë‹¤ 5ë¶„ íœ´ì‹</div>
                    <div class="recommendation-item">ê±±ì • ì¼ê¸° ì‘ì„± (í•˜ë£¨ 5ë¶„)</div>
                    <div class="recommendation-item">ìŠ¤ë§ˆíŠ¸í°/TV ì‹œì²­ ì‹œê°„ ì œí•œ</div>
                    <div class="recommendation-item">ì—…ë¬´ ìš°ì„ ìˆœìœ„ ì„¤ì • ë° ì‹œê°„ ê´€ë¦¬</div>
                `;
            } else if (hasMild) {
                immediateRecsHTML = `
                    <div class="recommendation-item">ê·œì¹™ì ì¸ ìš´ë™ (ì£¼ 3íšŒ, 30ë¶„)</div>
                    <div class="recommendation-item">ì¶©ë¶„í•œ ìˆ˜ë©´ê³¼ íœ´ì‹</div>
                    <div class="recommendation-item">ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œ í™œë™ ì°¾ê¸°</div>
                    <div class="recommendation-item">ê°€ì¡±, ì¹œêµ¬ì™€ì˜ ì‹œê°„ ëŠ˜ë¦¬ê¸°</div>
                    <div class="recommendation-item">ì—…ë¬´ì™€ ê°œì¸ ì‹œê°„ì˜ ê²½ê³„ ì„¤ì •</div>
                `;
            } else {
                immediateRecsHTML = `
                    <div class="recommendation-item">í˜„ì¬ì˜ ê±´ê°•í•œ ìƒí™œ íŒ¨í„´ ìœ ì§€</div>
                    <div class="recommendation-item">ì •ê¸°ì ì¸ ìê¸°ì ê²€ (ì›” 1íšŒ)</div>
                    <div class="recommendation-item">ì·¨ë¯¸ í™œë™ ì§€ì†í•˜ê¸°</div>
                    <div class="recommendation-item">ì‚¬íšŒì  ê´€ê³„ ìœ ì§€í•˜ê¸°</div>
                    <div class="recommendation-item">ì˜ˆë°©ì  ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ë²• í•™ìŠµ</div>
                `;
            }
            immediateRecs.innerHTML = immediateRecsHTML;
            
            // ì „ë¬¸ì  ë„ì›€
            let professionalRecsHTML = '';
            if (hasModerateOrSevere) {
                professionalRecsHTML = `
                    <div class="recommendation-item">ì •ì‹ ê±´ê°• ì „ë¬¸ì˜ ìƒë‹´ ê¶Œì¥</div>
                    <div class="recommendation-item">EAP(ì§ì›ì§€ì›í”„ë¡œê·¸ë¨) ìƒë‹´ ì„œë¹„ìŠ¤ ì´ìš©</div>
                    <div class="recommendation-item">ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ êµìœ¡ í”„ë¡œê·¸ë¨ ì°¸ì—¬</div>
                    <div class="recommendation-item">ì •ê¸°ì ì¸ ì •ì‹ ê±´ê°• ê²€ì§„</div>
                    <div class="recommendation-item">í•„ìš”ì‹œ ì•½ë¬¼ì¹˜ë£Œ ìƒë‹´</div>
                `;
            } else if (hasMild) {
                professionalRecsHTML = `
                    <div class="recommendation-item">EAP(ì§ì›ì§€ì›í”„ë¡œê·¸ë¨) ìƒë‹´ ê³ ë ¤</div>
                    <div class="recommendation-item">ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ ì›Œí¬ìˆ ì°¸ì—¬</div>
                    <div class="recommendation-item">ì •ì‹ ê±´ê°• ê´€ë ¨ êµìœ¡ ìë£Œ í™œìš©</div>
                    <div class="recommendation-item">ë™ë£Œ ì§€ì› ê·¸ë£¹ ì°¸ì—¬</div>
                `;
            } else {
                professionalRecsHTML = `
                    <div class="recommendation-item">ì—° 1íšŒ ì •ì‹ ê±´ê°• ê²€ì§„</div>
                    <div class="recommendation-item">ì •ì‹ ê±´ê°• êµìœ¡ í”„ë¡œê·¸ë¨ ì°¸ì—¬</div>
                    <div class="recommendation-item">ì§ì¥ ë‚´ ë™ë£Œ ì§€ì› í”„ë¡œê·¸ë¨ í™œìš©</div>
                    <div class="recommendation-item">ìŠ¤íŠ¸ë ˆìŠ¤ ì˜ˆë°© êµìœ¡ ì°¸ì—¬</div>
                `;
            }
            professionalRecs.innerHTML = professionalRecsHTML;
        }

        // ìŠ¤íŠ¸ë ˆìŠ¤ ìš”ì¸ ìƒìœ„ 3ê°œ ì˜ì—­ ìƒì„±
        function generateStressFactors(kossScores, container) {
            // ì ìˆ˜ê°€ ë†’ì€ ìƒìœ„ 3ê°œ ì˜ì—­ ì°¾ê¸°
            const sortedDomains = Object.entries(kossScores)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 3);
            
            if (sortedDomains.length === 0 || sortedDomains[0][1] < 50) {
                // ëª¨ë“  ì˜ì—­ì´ ì–‘í˜¸í•œ ê²½ìš°
                container.innerHTML = `
                    <div class="success-box">
                        <div class="alert-title">ìŠ¤íŠ¸ë ˆìŠ¤ ìš”ì¸ ë¶„ì„</div>
                        ëª¨ë“  ì§ë¬´ìŠ¤íŠ¸ë ˆìŠ¤ ì˜ì—­ì´ ì–‘í˜¸í•œ ìˆ˜ì¤€ì…ë‹ˆë‹¤. í˜„ì¬ ìƒíƒœë¥¼ ì˜ ìœ ì§€í•˜ê³  ê³„ì‹­ë‹ˆë‹¤.
                    </div>
                `;
                return;
            }
            
            let stressFactorsHTML = `
                <div class="stress-factors-title">ì£¼ìš” ìŠ¤íŠ¸ë ˆìŠ¤ ìš”ì¸ ìƒìœ„ 3ê°œ ì˜ì—­</div>
            `;
            
            sortedDomains.forEach((domain, index) => {
                const [domainKey, score] = domain;
                const domainInfo = kossDomains[domainKey];
                
                stressFactorsHTML += `
                    <div class="stress-factor-item">
                        <div class="stress-factor-rank">${index + 1}</div>
                        <div class="stress-factor-content">
                            <div class="stress-factor-title">${domainInfo.name} (${score}ì )</div>
                            <div class="stress-factor-desc">${domainInfo.description}</div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = stressFactorsHTML;
        }

        // íƒ€ì„ìŠ¤íƒ¬í”„ ì„¤ì •
        function setTimestamp() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: 'numeric',
                minute: 'numeric'
            };
            const currentTime = now.toLocaleDateString('ko-KR', options);
            
            const nextMonth = new Date(now);
            nextMonth.setMonth(nextMonth.getMonth() + 1);
            const nextTest = nextMonth.toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' });
            
            document.getElementById('timestamp').innerHTML = `
                ê²€ì‚¬ì¼ì‹œ: ${currentTime}<br>
                ë‹¤ìŒ ê²€ì‚¬ ê¶Œì¥ì¼: ${nextTest}
            `;
        }

        // ê²€ì‚¬ ë‹¤ì‹œ ì‹œì‘
        function restartAssessment() {
            // ìƒíƒœ ì´ˆê¸°í™”
            currentTest = 'phq9';
            currentQuestion = 0;
            responses = {
                phq9: [],
                gad7: [],
                koss: []
            };
            
            // í™”ë©´ ì „í™˜
            document.getElementById('results-screen').style.display = 'none';
            document.getElementById('intro-screen').style.display = 'block';
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            // ì´ˆê¸° ìƒíƒœì—ì„œëŠ” ì‹œì‘ í™”ë©´ë§Œ í‘œì‹œ
            document.getElementById('assessment-screen').style.display = 'none';
            document.getElementById('results-screen').style.display = 'none';
            
            // ê²°ê³¼ í™”ë©´ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
            const sections = document.querySelectorAll('.section');
            sections.forEach((section, index) => {
                section.style.opacity = '0';
                section.style.transform = 'translateY(20px)';
            });
        });

        // ê²°ê³¼ í™”ë©´ ì• ë‹ˆë©”ì´ì…˜
        function animateResults() {
            const sections = document.querySelectorAll('.section');
            sections.forEach((section, index) => {
                setTimeout(() => {
                    section.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                    section.style.opacity = '1';
                    section.style.transform = 'translateY(0)';
                }, index * 150);
            });
        }

        // ê²°ê³¼ í‘œì‹œ ì‹œ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰
        const originalShowResults = showResults;
        showResults = function() {
            originalShowResults();
            setTimeout(animateResults, 100);
        };
    </script>
</body>
</html>